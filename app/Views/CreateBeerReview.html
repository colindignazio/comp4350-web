<!DOCTYPE html>
<html>
<head>
    <title>Boozr Create Beer Review </title>
    <script src="jquery.min.js"></script>
</head>
<body>
Create or Update Beer Review
<br>
<br>
Review Id (only for updates):
<input type="text" id="reviewId"><br>
Beer Id:
<input type="text" id="beerId"><br>
User Id:
<input type="text" id="userId"><br>
Store Id:
<input type="text" id="storeId"><br>
Stars(1-5):
<input type="text" id="stars"><br>
Review:
<input type="text" id="review"><br>
Price:
<input type="text" id="price"><br>
<button onclick="sendRequest('BeerReview/Create', null, false);">Save new beer review</button>
<button onclick="sendUpdateRequest('BeerReview/updateReview', null, false);">Update existing beer review</button>

<div id="results">API Results</div>
</body>
</html>
<script>
    function sendRequest(method, callback, passSessionId) {

        if (isNaN(document.getElementById('beerId').value) || isNaN(document.getElementById('userId').value) || isNaN(document.getElementById('storeId').value) ||
                isNaN(document.getElementById('stars').value) || isNaN(document.getElementById('price').value)) {
            window.alert("The fields: beer id, user id, store id and stars must all be integers.\nThe field price must be an integer or floating point number.");
        }
        else {
            var params = {
                beer_id: document.getElementById('beerId').value,
                user_id: document.getElementById('userId').value,
                store_id: document.getElementById('storeId').value,
                stars: document.getElementById('stars').value,
                review: document.getElementById('review').value,
                price: document.getElementById('price').value,
            };
            if (passSessionId) params.sessionId = jobifyApi.sessionId;

            $.ajax({
                url: "http://54.200.14.217/?/" + method,
                type: "post",
                data: params,
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    $("#results").append("</br>" + JSON.stringify(data));

                    if (callback) callback(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {

                }
            });
        }
    }

    function sendUpdateRequest(method, callback, passSessionId) {

        if (isNaN(document.getElementById('beerId').value) || isNaN(document.getElementById('userId').value) || isNaN(document.getElementById('storeId').value) ||
                isNaN(document.getElementById('stars').value) || isNaN(document.getElementById('price').value) || isNaN(document.getElementById('reviewId').value)) {
            window.alert("The fields: review id, beer id, user id, store id and stars must all be integers.\nThe field price must be an integer or floating point number.");
        }
        else {
            var params = {
                review_id: document.getElementById('reviewId').value,
                beer_id: document.getElementById('beerId').value,
                user_id: document.getElementById('userId').value,
                store_id: document.getElementById('storeId').value,
                stars: document.getElementById('stars').value,
                review: document.getElementById('review').value,
                price: document.getElementById('price').value,
            };
            if (passSessionId) params.sessionId = jobifyApi.sessionId;

            $.ajax({
                url: "http://54.200.14.217/?/" + method,
                type: "post",
                data: params,
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    $("#results").append("</br>" + JSON.stringify(data));

                    if (callback) callback(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {

                }
            });
        }
    }
</script>
